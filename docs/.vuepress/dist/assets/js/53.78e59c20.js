(window.webpackJsonp=window.webpackJsonp||[]).push([[53],{382:function(a,r,e){"use strict";e.r(r);var s=e(1),t=Object(s.a)({},(function(){var a=this,r=a._self._c;return r("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[r("h2",{attrs:{id:"异常"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#异常"}},[a._v("#")]),a._v(" 异常")]),a._v(" "),r("p",[a._v("启动DolphinScheduler集群，测试资源中心创建文件夹、文件，我们发现文件夹创建没有问题，但是文件创建失败，查看api-server的日志发现\n"),r("img",{attrs:{src:"/img/ds_e1.png",alt:"ds_e1"}})]),a._v(" "),r("h2",{attrs:{id:"处理"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#处理"}},[a._v("#")]),a._v(" 处理")]),a._v(" "),r("p",[a._v("根据报错可以看出 程序运行时找不到指定类，缺少jar包。查看DolphinScheduler的api-server的lib，发现DolphinScheduler配置的hadoop-3.2.4，检查后发现该版本hadoop确实没有hadoop-shaded-guava-1.1.1.jar包。我们之前添加的cos依赖是hadoop-cos-3.3.3.jar，存在版本不兼容问题。")]),a._v(" "),r("p",[a._v("即不想实现cos接口，又想基于现有功能实现cos存储，所以就只能依赖HDFA的实现。因为我们在api-server、worker-server。添加缺失的依赖jar包即可。")]),a._v(" "),r("blockquote",[r("p",[r("a",{attrs:{href:"https://mvnrepository.com/artifact/org.apache.hadoop.thirdparty/hadoop-shaded-guava/1.1.1",target:"_blank",rel:"noopener noreferrer"}},[a._v("hadoop-shaded-guava-1.1.1.jar"),r("OutboundLink")],1)])]),a._v(" "),r("div",{staticClass:"language- line-numbers-mode"},[r("pre",{pre:!0,attrs:{class:"language-text"}},[r("code",[a._v("[localhost]$ cd /datadrive/dolphinscheduler/\n[localhost]$ cp hadoop-shaded-guava-1.1.1.jar api-server/lib/\n[localhost]$ cp hadoop-shaded-guava-1.1.1.jar alert-server/lib/\n[localhost]$ cp hadoop-shaded-guava-1.1.1.jar master-server/lib/\n[localhost]$ cp hadoop-shaded-guava-1.1.1.jar worker-server/lib/\n")])]),a._v(" "),r("div",{staticClass:"line-numbers-wrapper"},[r("span",{staticClass:"line-number"},[a._v("1")]),r("br"),r("span",{staticClass:"line-number"},[a._v("2")]),r("br"),r("span",{staticClass:"line-number"},[a._v("3")]),r("br"),r("span",{staticClass:"line-number"},[a._v("4")]),r("br"),r("span",{staticClass:"line-number"},[a._v("5")]),r("br")])]),r("blockquote",[r("p",[a._v("重启集群再次测试，文件创建成功")])])])}),[],!1,null,null,null);r.default=t.exports}}]);