(window.webpackJsonp=window.webpackJsonp||[]).push([[48],{376:function(s,t,a){"use strict";a.r(t);var e=a(1),r=Object(e.a)({},(function(){var s=this,t=s._self._c;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("h2",{attrs:{id:"_1-表函数"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-表函数"}},[s._v("#")]),s._v(" 1. 表函数")]),s._v(" "),t("h3",{attrs:{id:"_1-1-s3"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-1-s3"}},[s._v("#")]),s._v(" 1.1. S3")]),s._v(" "),t("blockquote",[t("p",[t("a",{attrs:{href:"https://clickhouse.com/docs/zh/sql-reference/table-functions/s3",target:"_blank",rel:"noopener noreferrer"}},[s._v("clickhouse官网-使用文档"),t("OutboundLink")],1)])]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("语法：\nselect column1 , column2\nfrom s3(path, [aws_access_key_id, aws_secret_access_key], format,structure, [compression]);\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br")])]),t("ul",[t("li",[s._v("path — 带有文件路径的 Bucket url。在只读模式下支持以下通配符: *, ?, {abc,def} 和 {N..M} 其中 N, M 是数字, 'abc', 'def' 是字符串. 更多信息见下文.")]),s._v(" "),t("li",[s._v("format — 文件的格式.常用CSV、TSV、CustomSeparated")]),s._v(" "),t("li",[s._v("structure — 表的结构. 格式像这样 'column1_name column1_type, column2_name column2_type, ...'.")]),s._v(" "),t("li",[s._v("compression — 压缩类型. 支持的值: none, gzip/gz, brotli/br, xz/LZMA, zstd/zst. 参数是可选的. 默认情况下，通过文件扩展名自动检测压缩类型.")])]),s._v(" "),t("h4",{attrs:{id:"_1-1-1-读外部表"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-1-1-读外部表"}},[s._v("#")]),s._v(" 1.1.1. 读外部表")]),s._v(" "),t("blockquote",[t("p",[s._v("以cos为例")])]),s._v(" "),t("ol",[t("li",[s._v("示例1(CSV默认分隔符 , )")])]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("select id, name\nfrom s3('http://demo.cos.ap-shanghai.myqcloud.com/test.csv','CSV','id String, name String');\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("ol",{attrs:{start:"2"}},[t("li",[s._v("示例2(自定义输入CSV文件分隔符：format_csv_delimiter)")])]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("select id, name\nfrom s3('http://demo.cos.ap-shanghai.myqcloud.com/test.csv','CSV','id String, name String')\nsettings format_csv_delimiter='|';\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br")])]),t("ol",{attrs:{start:"3"}},[t("li",[s._v("示例3(指定允许异常跳过： input_format_allow_errors_num，input_format_allow_errors_ratio )")])]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("select id, name\nfrom s3('http://demo.cos.ap-shanghai.myqcloud.com/test.csv','CSV','id String, name String')\nsettings format_csv_delimiter='|'\n         input_format_allow_errors_num=500;\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br")])]),t("h4",{attrs:{id:"_1-1-2-写外部表"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-1-2-写外部表"}},[s._v("#")]),s._v(" 1.1.2. 写外部表")]),s._v(" "),t("blockquote",[t("p",[s._v("以cos为例")])]),s._v(" "),t("ol",[t("li",[s._v("示例1(CSV默认分隔符 , )")])]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("INSERT INTO FUNCTION\ns3('http://demo.cos.ap-shanghai.myqcloud.com/out.csv','CSV','id String, name String');\nselect id, name\nfrom s3('http://demo.cos.ap-shanghai.myqcloud.com/test.csv','CSV','id String, name String');\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br")])]),t("ol",{attrs:{start:"2"}},[t("li",[s._v("示例2(自定义输出文件分隔符：format_custom_field_delimiter)")])]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("INSERT INTO FUNCTION\ns3('http://demo.cos.ap-shanghai.myqcloud.com/out.csv','CustomSeparated','id String, name String');\nselect id, name\nfrom s3('http://demo.cos.ap-shanghai.myqcloud.com/test.csv','CSV','id String, name String')\nsettings format_csv_delimiter='|'\nsettings format_custom_field_delimiter='|';\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br")])]),t("h3",{attrs:{id:"_1-2-postgresql"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-2-postgresql"}},[s._v("#")]),s._v(" 1.2. postgreSQL")]),s._v(" "),t("blockquote",[t("p",[t("a",{attrs:{href:"https://clickhouse.com/docs/zh/sql-reference/table-functions/postgresql",target:"_blank",rel:"noopener noreferrer"}},[s._v("clickhouse官网-使用文档"),t("OutboundLink")],1)])]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("语法：\npostgresql('host:port', 'database', 'table', 'user', 'password'[, `schema`])\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("ul",[t("li",[s._v("host:port — PostgreSQL 服务器地址.")]),s._v(" "),t("li",[s._v("database — 远程数据库名称.")]),s._v(" "),t("li",[s._v("table — 远程表名称.")]),s._v(" "),t("li",[s._v("user — PostgreSQL 用户.")]),s._v(" "),t("li",[s._v("password — 用户密码.")]),s._v(" "),t("li",[s._v("schema — 非默认的表结构. 可选.")])]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("示例\nSELECT * FROM postgresql('localhost:5432', 'test', 'test', 'postgresql_user', 'password') WHERE str IN ('test');\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("h3",{attrs:{id:"_1-3-mysql"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-3-mysql"}},[s._v("#")]),s._v(" 1.3. mysql")]),s._v(" "),t("blockquote",[t("p",[t("a",{attrs:{href:"https://clickhouse.com/docs/zh/sql-reference/table-functions/mysql",target:"_blank",rel:"noopener noreferrer"}},[s._v("clickhouse官网-使用文档"),t("OutboundLink")],1)])]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("语法：\nmysql('host:port', 'database', 'table', 'user', 'password'[, replace_query, 'on_duplicate_clause']);\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("ul",[t("li",[s._v("host:port — MySQL服务器地址.")]),s._v(" "),t("li",[s._v("database — 远程数据库名称.")]),s._v(" "),t("li",[s._v("table — 远程表名称.")]),s._v(" "),t("li",[s._v("user — MySQL用户.")]),s._v(" "),t("li",[s._v("password — 用户密码.")])]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("示例\nSELECT * FROM mysql('localhost:3306', 'test', 'test', 'bayonet', '123')\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("h2",{attrs:{id:"_2-常用函数"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-常用函数"}},[s._v("#")]),s._v(" 2. 常用函数")]),s._v(" "),t("h3",{attrs:{id:"_2-1-时间函数"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-1-时间函数"}},[s._v("#")]),s._v(" 2.1. 时间函数")]),s._v(" "),t("h3",{attrs:{id:"_2-2-json解析函数"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-2-json解析函数"}},[s._v("#")]),s._v(" 2.2. json解析函数")]),s._v(" "),t("h3",{attrs:{id:"_2-3-字符串函数"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-3-字符串函数"}},[s._v("#")]),s._v(" 2.3. 字符串函数")])])}),[],!1,null,null,null);t.default=r.exports}}]);